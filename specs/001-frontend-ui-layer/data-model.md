# Data Model: Frontend & UI Layer

**Feature**: Frontend & UI Layer
**Date**: 2026-02-05
**Status**: Draft

## Overview

This document describes the data model for the frontend UI layer of the todo application. It outlines the entities, their properties, relationships, and validation rules that the frontend will work with.

## Entities

### User (Frontend Representation)

**Description**: Represents an authenticated user with state managed by Better Auth

**Fields**:
- id: string - Unique identifier for the user (from auth provider)
- email: string - User's email address (required for login)
- name: string - User's display name (optional)
- createdAt: Date - Account creation timestamp
- isAuthenticated: boolean - Current authentication state

**Validation**:
- email must be a valid email format
- id must be non-empty string
- isAuthenticated must be boolean

### Task

**Description**: Represents a user's personal todo item managed through the UI

**Fields**:
- id: string - Unique identifier for the task (generated by backend)
- userId: string - Reference to the owning user (for frontend validation)
- title: string - Task title/description (required)
- description: string - Extended task details (optional)
- completed: boolean - Completion status (default: false)
- createdAt: Date - Task creation timestamp
- updatedAt: Date - Last modification timestamp
- completedAt: Date | null - Timestamp when task was marked complete (optional)

**Validation**:
- id must be non-empty string
- userId must match authenticated user
- title must be 1-255 characters
- completed must be boolean
- createdAt and updatedAt must be valid timestamps

### AuthState

**Description**: Represents the current authentication state in the frontend

**Fields**:
- user: User | null - Currently authenticated user object or null if not logged in
- isLoading: boolean - Whether authentication state is being loaded
- isAuthenticated: boolean - Whether user is currently authenticated
- jwtToken: string | null - Current JWT token for API requests
- error: string | null - Any authentication error message

**Validation**:
- If isAuthenticated is true, user and jwtToken must not be null
- If isAuthenticated is false, user and jwtToken may be null

## Relationships

### User → Task
- One-to-many relationship
- A user can have multiple tasks
- Each task belongs to exactly one user
- Frontend enforces that users can only view/edit/delete their own tasks

## State Transitions

### Task State Transitions
- Pending → Completed (when user marks task as complete)
- Completed → Pending (when user unmarks task as complete)

### Auth State Transitions
- Unauthenticated → Authenticating (during login/signup process)
- Authenticating → Authenticated (after successful login/signup)
- Authenticated → Unauthenticated (after logout)

## Validation Rules from Requirements

1. **FR-001 & FR-002**: User authentication must be validated before allowing task operations
2. **FR-003**: Only tasks belonging to the authenticated user should be displayed
3. **FR-007**: Task completion status must be toggleable
4. **FR-008**: JWT token must be validated before API requests
5. **FR-011**: Appropriate feedback must be shown when API requests fail

## UI-Specific Data Structures

### TaskFilter
- status: 'all' | 'active' | 'completed' - Filter tasks by completion status
- searchTerm: string - Search term for filtering tasks by title/description

### ApiRequestState
- isLoading: boolean - Whether request is in progress
- error: string | null - Error message if request failed
- success: boolean - Whether request succeeded